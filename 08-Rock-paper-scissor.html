<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <h2>Rock Paper Scissors</h2>

    <button onclick="playGame('Rock')">Rock</button>
    <button onclick="playGame('Paper')">Paper</button>
    <button onclick="playGame('Scissors')">Scissors</button>
    <button onclick="resetScore()">Reset</button>

    <script>
      let score = JSON.parse(localStorage.getItem('score')) 
      || {
        user : 0, computer : 0, draws : 0
      } ;
    
      function resetScore() {
        score.user = 0;
        score.computer = 0;
        score.draws = 0;
        localStorage.removeItem('score');
        alert("Scores have been reset!");
      }

      function playGame(choice) {
        let randomNumber = Math.random();
        let ComputerChoice = "";
        let result = "";

        // Deciding computer choice
        if (randomNumber < 1 / 3) {
          ComputerChoice = "Rock";
        } 
        else if (randomNumber < 2 / 3) {
          ComputerChoice = "Paper";
        } 
        else {
          ComputerChoice = "Scissors";
        }

        // Deciding result
        if (choice === "Rock") {
          if (ComputerChoice === "Rock") result = "Draw";
          else if (ComputerChoice === "Paper") result = "Computer wins";
          else result = "You win";
        } 
        else if (choice === "Paper") {
          if (ComputerChoice === "Rock") result = "You win";
          else if (ComputerChoice === "Paper") result = "Draw";
          else result = "Computer wins";
        }
        else {
          if (ComputerChoice === "Rock") result = "Computer wins";
          else if (ComputerChoice === "Paper") result = "You win";
          else result = "Draw";
        }
        // Updating score
        if (result === "You win") score.user += 1;
        else if (result === "Computer wins") score.computer += 1;
        else score.draws += 1;

        // Saving it to Local Storage

        localStorage.setItem("score", JSON.stringify(score));

        alert(
          `You Choosed ${choice}. Computer chose: ${ComputerChoice}. Result: ${result} \n Scores => You : ${score.user}, Computer : ${score.computer}, Draws : ${score.draws}`
        );
      }
    </script>
  </body>
</html>
